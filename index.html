<!DOCTYPE html>
<style>body{display:flex;justify-content:space-evenly;margin:0}body,html{height:100%}canvas{display:block}figcaption{line-height:2}figcaption::after{content:" ms"}figure{margin:0}figure:not(:first-of-type)>canvas{height:0}</style>
<script type="module">
import { decode } from "https://unpkg.com/blurhash@2.0.5/dist/index.mjs"
import render from "/src/index.ts"
const source = "|HF5]+Yk^6#M9wKSW@j=#*@-5b,1J5O[V=Nfs;w[@[or[k6.O[TLtJnNnO};FxngOZE3NgNHsps,jMFxS#OtcXnzRjxZxHj]OYNeR:JCs9xunhwIbeIpNaxHNGr;v}aeo0Xmt6XS$et6#*$ft6nhxHnNV@w{nOenwfNHo0"
const buraha = document.body.appendChild(document.createElement("section"))
buraha.appendChild(document.createElement("h2")).textContent = "buraha"
const blurhash = document.body.appendChild(document.createElement("section"))
blurhash.appendChild(document.createElement("h2")).textContent = "blurhash"
for (let i = 0; i < 16; i++) {
  const figure = buraha.appendChild(document.createElement("figure"))
  const canvas = figure.appendChild(document.createElement("canvas"))
  canvas.width = 256
  canvas.height = 256
  performance.mark("start")
  render(source, canvas, 1)
  performance.mark("end")
  figure.appendChild(document.createElement("figcaption")).textContent = performance.measure("render", "start", "end").duration
}
for (let i = 0; i < 16; i++) {
  const figure = blurhash.appendChild(document.createElement("figure"))
  const canvas = figure.appendChild(document.createElement("canvas"))
  canvas.width = 256
  canvas.height = 256
  performance.mark("start")
  const pixels = decode(source, 256, 256)
  const context = canvas.getContext("2d")
  const imageData = context.createImageData(256, 256)
  imageData.data.set(pixels)
  context.putImageData(imageData, 0, 0)
  performance.mark("end")
  figure.appendChild(document.createElement("figcaption")).textContent = performance.measure("render", "start", "end").duration
}
</script>
